
<div class="softgrid-display" ng-class="{'softgrid-display-fullscreen': softgrid.fullscreen}">

    <!-- CONTROLES E PAGINACAO -->

    <div class="grid-controles">

        <div class="row">

            <!-- Controle de Filtro -->

            <div class="col-md-4">

                <div ng-hide="hide.filter || hide.all">

                    <label>Filtrar</label>
                    <div class="input-group">
                        <span class="input-group-addon" id="filtro-addon"><span class="fa fa-search"></span></span>
                        <input type="text" class="form-control" ng-model="softFiltro" placeholder="Palavra-chave" aria-describedby="filtro-addon">
                    </div>

                </div>

            </div>

            <!-- Fim Controle de Filtro

            <!-- Controle de Contagem e Menu -->

            <div class="col-md-2">

                <div ng-hide="hide.options || hide.all">

                    <label>Opções</label>
                    <div class="input-group">
                        <input type="text" class="form-control" aria-label="..." value="{{data.length}} encontrado(s)" disabled="true">
                        <div class="input-group-btn">
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-bars"></span></button>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <li><a ng-click="softGridToExcel()">Gerar Excel</a></li>
                            </ul>
                        </div>
                    </div>

                    <div ng-if="subgrid">
                    <a href="#" ng-show="false"  id="softDownload"></a>
                    </div>
                </div>

            </div>

            <!-- Fim Controle de Contagem e Menu-->

            <!-- Controle de Linhas por Página -->

            <div class="col-md-2">

                <div class="form-group" ng-hide="hide.linesPage || hide.all">

                        <label>Linhas por página</label>

                        <div class="input-group" style="width: 120px;">

                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="linhaMax = linhaMax - 10">-</button>
                        </span>

                            <input type="text" class="form-control" value="{{linhaMax}}">

                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button" ng-click="linhaMax = linhaMax + 10">+</button>
                            </span>

                        </div>

                </div>

            </div>

            <!-- Fim Controle de Linhas por Página -->

            <!-- Controle Fullscreen -->

            <div class="col-md-1">

                <div class="form-group" ng-hide="hide.fullscreen || hide.all" style="text-align: center">

                    <label>Tela Cheia</label>

                    <button class="btn btn-default" type="button" ng-click="softgrid.fullscreen = softgrid.fullscreen ? false : true">
                        <span class="fa fa-arrows-alt"></span>
                    </button>

                </div>

            </div>

            <!-- Fim Controle Fullscreen -->

            <!-- Controle de Paginacao -->

            <div class="col-md-3">

                <nav aria-label="Page navigation" class="pull-right" ng-hide="hide.pagination || hide.all">
                    <label>Paginação</label>
                        <ul class="pagination" ng-init="sgTotalPaginas = data.length / softLimite">
                            <li>
                                <a href="javascript:void(0);" target="_self" aria-label="Previous" ng-click="softPagina = softPagina == 1 ? 1 : softPagina - 1">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <li ng-class="{'active': softPagina == 1}"><a href="javascript:void(0);" target="_self" ng-click="softPagina = softPagina < 3 ? 1 : softPagina - 2">{{ softPagina <= 3 ? 1 : softPagina - 2 }}</a></li>
                            <li ng-class="{'active': softPagina == 2}"><a href="javascript:void(0);" target="_self" ng-click="softPagina = softPagina < 3 ? 2 : softPagina - 1">{{ softPagina <= 3 ? 2 : softPagina - 1 }}</a></li>
                            <li ng-class="{'active': softPagina >= 3}"><a href="javascript:void(0);" target="_self" ng-click="softPagina = softPagina < 3 ? 3 : softPagina">{{ softPagina <= 3 ? 3 : softPagina     }}</a></li>
                            <li><a href="javascript:void(0);" target="_self" ng-click="softPagina = softPagina < 3 ? 4 : softPagina + 1">{{ softPagina <= 3 ? 4 : softPagina + 1 }}</a></li>
                            <li><a href="javascript:void(0);" target="_self" ng-click="softPagina = softPagina < 3 ? 5 : softPagina + 2">{{ softPagina <= 3 ? 5 : softPagina + 2 }}</a></li>
                            <li>
                                <a href="javascript:void(0);" target="_self" aria-label="Next" ng-click="softPagina = softPagina + 1">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>

                </nav>

            </div>

            <!-- Fim Controle Paginacao -->

    </div>

    </div>

    <!-- FIM CONTROLES E PAGINACAO -->

    <div class="row">

        <div class="col-md-12">

                <div class="softgrid-container">

                    <div ng-style=" width ? { 'width': width + 'px' } : { 'width': '100%' }">

                        <table ng-attr-id="{{!subgrid ? 'none': 'softgrid'}}" class="softgrid {{template}}" >
                            <thead>

                                <th ng-show="actions.length > 0">
                                </th>

                                <th ng-show="subgrid"></th>

                                <th ng-show="options.selectable"></th>

                                <th ng-repeat="col in cols" ng-show="!col.hide" style="text-align:center;">

                                  <span class="title" ng-click="$parent.softOrdem = col.item">{{col.title}}  <span class="fa fa-sort"></span></span>

                                </th>

                            </thead>

                            <tbody>

                                <tr   ng-class="{'soft-row-striped': ($index%2)}" ng-repeat-start="row in (dataFiltered = (data | filter: softFiltro | limitTo: linhaMax : ((softPagina * linhaMax) - linhaMax) | orderBy: softOrdem))">

                                    <td ng-show="subgrid">

                                        <div class="input-group">

                                            <div class="input-group-btn">

                                                <!-- botão para exibir sub tabela -->
                                                <button type="button" class="btn btn-default btn-sm" ng-click="showSubGrid = showSubGrid ? false : true">
                                                    <span class="fa fa-expand"></span>
                                                </button>

                                            </div>

                                            <div class="input-group-btn" >
                                                <div class="dropdown">

                                                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                        <span class="fa fa-bars"></span>
                                                    </button>

                                                    <ul class="dropdown-menu dropdown-menu-left">
                                                        <li ng-repeat="action in actions"><a ng-click="action.function(row)"><span class="{{action.icon}}"></span> {{action.title}}</a></li>
                                                    </ul>

                                                </div>
                                            </div>

                                        </div>

                                    </td>

                                    <!-- Coluna com ações da linha -->
                                    <td ng-show="actions.length > 0" style="text-align:center;">



                                    </td>

                                    <!-- Coluna para checkbox -->
                                    <td style="text-align: center;" ng-show="options.selectable">
                                        <label class="switch">
                                            <input type="checkbox">
                                            <div class="slider round"></div>
                                        </label>
                                    </td>

                                    <!-- Colunas com os Dados da Grid -->
                                    <td ng-repeat="col in cols">

                                        <div ng-style="col.align ? { 'text-align': col.align} : { 'text-align': 'left' }"> <!--div para controlar o alinhamento-->

                                            <!-- Busca o item da linha com base no nome do item salvo na coluna, ou item com subitem ; E filtra a string caso haja um limite definido na propriedade maxLength-->
                                            <label ng-hide="col.popOver">
                                                {{
                                                temp = (col.item ? row[col.item] : row[col.subitem.a][col.subitem.b] | limitTo: (col.maxLength ? col.maxLength : 999));
                                                }}
                                            </label>

                                            <label style="text-decoration: underline; cursor: pointer" ng-show="col.popOver"   popover data-toggle="popover" data-trigger="hover" data-content="{{(col.item ? row[col.item] : row[col.subitem.a][col.subitem.b])}}">{{temp}}</label>

                                        </div>

                                    </td>

                                </tr>
                                <tr ng-repeat-end="" ng-show="subgrid" ng-hide="!showSubGrid" ng-class="{'soft-row-striped': ($index%2)}"> <!-- Linha para Subtabela -->

                                    <td colspan="{{cols.length + 3}}">

                                        <div class="soft-subgrid-container">

                                            <div ng-if="subgrid">

                                                <softgrid  cols="subgrid.cols" data="row[subgrid.object]" hide="subgrid.hide" template="'soft-subgrid'"></softgrid>

                                            </div>

                                        </div>

                                    </td>

                                </tr>

                                <!-- Exibe uma linha caso não haja dados -->
                                <tr ng-show="dataFiltered.length <= 0" style="text-align: center;">

                                    <td colspan="{{cols.length + 3}} ">
                                    Não há dados a serem exibidos.
                                    </td>
                                </tr>

                            </tbody>

                        </table>

                    </div>

                </div>


        </div>

    </div>

    <div class="row" ng-hide="hide.pagination || hide.all">

        <div class="col-md-12">

            <nav aria-label="...">
                <ul class="pager" style="margin-top: 5px;">
                    <li class="previous"><button class="btn btn-default pull-left" ng-click="softPagina = softPagina - 1" ng-disabled="softPagina == 1"><span aria-hidden="true">&larr;</span> Página anterior</button></li>
                    <li class="next"><button class="btn btn-default pull-right" ng-click="softPagina = softPagina + 1" ng-disabled="(data.length / linhaMax).toFixed() <= softPagina">Próxima página <span aria-hidden="true">&rarr;</span></button></li>
                </ul>
            </nav>

        </div>

    </div>

</div>








